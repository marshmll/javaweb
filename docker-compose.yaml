services:
    webserver:
        container_name: tomcat
        image: tomcat:latest
        ports:
            - "8080:8080"
        volumes:
            - ./lib:/usr/local/tomcat/webapps/ROOT/WEB-INF/lib
            - ./bin:/usr/local/tomcat/webapps/ROOT/WEB-INF/classes
            - ./src/view:/usr/local/tomcat/webapps/ROOT/WEB-INF/pages
            - ./web.xml:/usr/local/tomcat/webapps/ROOT/WEB-INF/web.xml
        environment:
            CATALINA_OPTS: "-Djava.awt.headless=true -Xms512m -Xmx1024m"
        restart: always
    database:
        container_name: mysql
        image: mysql/mysql-server:latest
        ports:
            - "3307:3306"
        volumes:
            - mysql-volume:/var/lib/mysql
            - ./database/scripts:/docker-entrypoint-initdb.d
        environment:
            - MYSQL_DATABASE=social_media
            - MYSQL_ROOT_PASSWORD=root
            - LANG=C.UTF-8
            - TZ=America/Sao_Paulo
        restart: always
volumes:
    mysql-volume:
        driver: local
